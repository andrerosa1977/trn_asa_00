{
	"name": "18_RESUMO_ESPACO_TABELAS",
	"properties": {
		"folder": {
			"name": "02_SQL_DEDICADO"
		},
		"content": {
			"query": "--Esta consulta retorna as linhas e o espaço por tabela. \n--Ele permite que você veja quais tabelas são suas maiores tabelas e se \n-- elas são de rodízio, replicadas ou distribuídas por hash. \n-- Nas tabelas distribuídas em hash, a consulta exibe a coluna de distribuição.\nSELECT\n     database_name\n,    schema_name\n,    table_name\n,    distribution_policy_name\n,      distribution_column\n,    index_type_desc\n,    COUNT(distinct partition_nmbr) as nbr_partitions\n,    SUM(row_count)                 as table_row_count\n,    SUM(reserved_space_GB)         as table_reserved_space_GB\n,    SUM(data_space_GB)             as table_data_space_GB\n,    SUM(index_space_GB)            as table_index_space_GB\n,    SUM(unused_space_GB)           as table_unused_space_GB\nFROM\n    dbo.vTableSizes\nGROUP BY\n     database_name\n,    schema_name\n,    table_name\n,    distribution_policy_name\n,      distribution_column\n,    index_type_desc\nORDER BY\n    table_reserved_space_GB desc\n;",
			"metadata": {
				"language": "sql"
			},
			"currentConnection": {
				"databaseName": "dw01",
				"poolName": "dw01"
			},
			"resultLimit": 5000
		},
		"type": "SqlQuery"
	}
}